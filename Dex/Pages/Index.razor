@page "/"
@inject PokeClient client

<div class="container">
    <div class="pokemon-row">
        @foreach (var p in pokemonList)
        {
            <a href="/pokemon/@p.id">
                <div class="pokemon-card">
                    <img src="@p.sprites.front_default" alt="">
                    <h4 class="pokemon-name">@p.name</h4>
                    <div class="type-row">
                        @foreach (var type in p.types)
                        {
                            <span class="badge-type" style="background-color: @PokeColor.GetTypeColor(@type.type.name);">@type.type.name</span>
                        }
                    </div>
                </div>
            </a>
        }
    </div>
</div>

@code {
    List<Pokemon> pokemonList = new List<Pokemon>();
    protected override async Task OnInitializedAsync()
    {
        for (int i = 1; i < 152; i++)
        {
            pokemonList.Add(await client.GetPokemon(i.ToString()));
            StateHasChanged();
        }
    }
}